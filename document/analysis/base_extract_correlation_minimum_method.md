# 基底抽出相関最小法(base extract correlation minimum method)  

基底を用いてデータの周期性やパターンを計算する手法です。
多次元データに対応可能だが、1次元と2次元データのみの対応とした。
テストスクリプトでテストデータの解析結果が出力されます。  

# 関数について  
- freq_analysis_1D  
基底抽出相関最小法により、1次元のデータの頻度の分布を求める関数。  
インデックスが小さい物が高頻度、大きいものが低頻度となっており、  
インデックス0が連続して二回事象が起きる回数の平均、  
インデックス1が二回に一回度事象が起きる回数の平均、  
インデックス2が三回に一回度事象が起きる回数の平均、... となります。


- freq_analysis_2D  
基底抽出相関最小法により、2次元のデータの頻度の分布を求める関数。  
1次元の処理を拡張した関数で多次元のため、  
インデックス1が連続して二回事象が起きる回数の平均、  
インデックス2が二回に一回度事象が起きる回数の平均、  
インデックス3が三回に一回度事象が起きる回数の平均、... となります。

- continuous_analisys_1D  
基底抽出相関最小法により、1次元のデータの連続度の分布を求める関数。  
インデックスが小さい物が連続度が低く、大きいものが連続度が高くなっている、  
インデックス0が事象が起きる回数の平均、  
インデックス1が二回連続して事象が起きる回数の平均、  
インデックス2が三回連続して回度事象が起きる回数の平均、... となります。

- continuous_analisys_2D  
基底抽出相関最小法により、2次元のデータの連続度の分布を求める関数。1次元の処理を拡張した関数。

- any_base_analysis_1D  
基底抽出相関最小法により、任意の基底の1次元の頻度を求める関数。
位相毎の頻度を出力する。 正の値のみの対応。  
インデックスが事象の発生位置となります。 
基底の0以外の値の最小値を1とすること。  

- any_base_analysis_2D  
基底抽出相関最小法により、任意の基底の2次元の頻度を求める関数。
位相毎の頻度を出力する。正の値のみの対応。  
1次元の処理を拡張した関数。  
インデックスが事象の発生位置となります。 
基底の0以外の値の最小値を1とすること。  

- any_base_analysis_1D_with_negative  
基底抽出相関最小法により、任意の基底の1次元の頻度を求める関数。
位相毎の頻度を出力する。負の値にも対応。   
インデックスが事象の発生位置となる。 
基底の0以外の値の絶対値の最小値を1とすること。  

- any_base_analysis_2D_with_negative  
基底抽出相関最小法により、任意の基底の2次元の頻度を求める関数。
位相毎の頻度を出力する。負の値にも対応。    
1次元の処理を拡張した関数。
インデックスが事象の発生位置となる。 
基底の0以外の値の絶対値の最小値を1とすること。  


# 基底抽出相関最小法について
フーリエ変換変換のように事象の周期性を求めるために、発案した手法です。  
数学的な厳密性はないが、波による周期性ではなく設定した間隔の頻度を計算する手法です。  

![基底抽出相関最小法](https://user-images.githubusercontent.com/123277284/214988231-e8797346-1004-4277-9321-5d81a6dadb39.png)

頻度解析では、基底を二つをおき、その二つの基底の間隔を一つずつ増やしていき、データの周期性を計算しています。    
連続性解析では、基底を連続でおき、基底の数を一つずつ増やしていき、データの連続性を計算しています。  
任意の基底解析では、任意の基底をおき、相関取得毎の最小値を初期位置毎に出力しています。  
これにより、任意のパターンがどのタイミングで発生した検討できます。 
なお、任意の基底では、抽出処理後の基底と割り算取得後の最小値をとる事により、それぞれの位置での大きさの違いも表現する事が可能である。  
任意の基底の0ではない値の絶対値の最小値を1して計算を行うと、大きさの比率も含めてパターンを抽出可能です。  

- 出力例  

![基底抽出相関最小法_1D_output](https://user-images.githubusercontent.com/123277284/213916168-b9017767-66ae-4818-9dc9-3152c3f23145.png)

![基底抽出相関最小法_2D_output](https://user-images.githubusercontent.com/123277284/213916338-f4979a2b-46a2-4952-ac4d-71ee66215410.png)

# エイリアス
フーリエ変換と同様に基底抽出相関最小法でもエイリアスが発生します。  
下の図はエイリアスを表示したものです。  

![エイリアス](https://user-images.githubusercontent.com/123277284/213925031-55cba1bd-7460-41a2-a844-e47af966cd37.png)

図は、3回に一度規則的に現象が発生しているデータを解析したものです。  
これを周期解析すると、3回に一度、6回に一度、9回に一度、....といった、倍数の周期に成分がある事がわかります。  
特定周期のみのデータの場合、この影響を除去する事は容易だが、特定の条件に当てはまらない複数の周期が混在している場合除去が難しい。  
エイリアスが発生する事を前提として分析を行う事が望ましい。  

# その他注意点
任意の基底で負の値に対応する関数も作成しました。  
負の値に対応する場合処理の分岐が多くないりましたが対応可能でした。  
しかし負の値は、情報を切る部分が増えるので、
データの重なりにより基底パターンが正確に出ない場合があり、  
あまり使用をお勧めしません。  
負の値がある場合は、最小値を足して正の値のみで解析する事をお勧めします。

# 実装
- python  
    - module  
    python/analysis/base_extract_correlation_minimum_method.py 
    - test(sample)  
    python/test_base_extract_correlation_minimum_method.py


# 最後に  
徐々に修正していますが、なんとなく作ったので細かい事はこれからです。  
様々なデータにかけて傾向を見てみたいので、ご協力いただけるとうれしいです。  
ご連絡お待ちしています。  

[click mail link(連絡先)](<mailto:yasuhara.wataru.personal.work@gmail.com>)
